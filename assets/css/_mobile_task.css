/* Suppression des comportements de tableau WordPress sur Mobile */
@media screen and (max-width: 782px) {

    /* 0. FORCE LA LARGEUR DU PARENT WP */
    #wpbody-content, .wrap, .adm-table-responsive {
        padding: 0 !important;
        margin: 0 !important;
        width: 100vw !important;
        max-width: 100vw !important;
        overflow-x: hidden !important;
    }

    /* 1. CACHER LES EN-TÊTES (Totalement) */
    table.ispag-task-table thead,
    table.ispag-task-table thead tr,
    table.ispag-task-table thead th {
        display: none !important;
        visibility: hidden !important;
        height: 0 !important;
        padding: 0 !important;
    }

    /* 2. RENDRE LE TABLEAU FLEXIBLE (Casse le min-width initial) */
    table.ispag-task-table {
        display: block !important;
        width: 100% !important;
        min-width: 0 !important; /* Casse la largeur forcée de WP */
        max-width: 100vw !important;
        border: none !important;
        background: transparent !important;
        box-sizing: border-box !important;
        table-layout: auto !important;
    }

    table.ispag-task-table tbody {
        display: block !important;
        width: 100% !important;
    }

    /* 3. LA CARTE (Chaque ligne devient un bloc) */
    table.ispag-task-table tbody tr {
        display: block !important;
        /* On laisse 10px de marge de chaque côté pour éviter que ça touche les bords */
        width: calc(100% - 20px) !important; 
        margin: 10px auto 15px auto !important; 
        background: var(--ispag-color-background) !important;
        padding: 15px 15px 15px 50px !important; /* Espace pour le check à gauche */
        border-radius: 12px !important;
        border: 1px solid rgba(0,0,0,0.1) !important;
        position: relative !important;
        box-sizing: border-box !important;
        float: none !important;
        height: auto !important;
    }

    /* 4. LES CELLULES (Chaque colonne devient une ligne dans la carte) */
    table.ispag-task-table tbody td {
        display: block !important;
        width: 100% !important;
        padding: 4px 0 !important;
        border: none !important;
        text-align: left !important;
        box-sizing: border-box !important;
        height: auto !important;
        white-space: normal !important; /* Permet le retour à la ligne du texte */
    }

    /* Style spécifique pour le Titre */
    table.ispag-task-table td.column-title {
        font-size: 1.1rem;
        font-weight: bold;
        line-height: 1.2;
        margin-bottom: 5px;
    }

    /* 5. LE BOUTON CHECK (Position fixe à gauche dans la carte) */
    table.ispag-task-table tbody th.check-column {
        display: block !important;
        position: absolute !important;
        left: 10px !important;
        top: 15px !important;
        width: 30px !important;
        border: none !important;
        padding: 0 !important;
        margin: 0 !important;
        background: transparent !important;
    }

    /* 6. LES BOUTONS D'ACTION (L'un sur l'autre) */
    table.ispag-task-table td:last-child {
        margin-top: 15px !important;
        padding-top: 15px !important;
        border-top: 1px solid rgba(0,0,0,0.08) !important;
        display: flex !important;
        flex-direction: column !important; /* Empilement vertical */
        gap: 8px !important;
    }

    table.ispag-task-table .ispag-btn {
        display: block !important;
        width: 100% !important; /* Bouton pleine largeur */
        margin: 0 !important;
        padding: 12px !important; /* Plus facile à cliquer au doigt */
        text-align: center !important;
        box-sizing: border-box !important;
    }

    /* Correction couleur Date si en retard */
    table.ispag-task-table td.ispag-overdue-date {
        color: #d63638 !important; /* Rouge WP pour les alertes */
        font-weight: 600;
    }
}